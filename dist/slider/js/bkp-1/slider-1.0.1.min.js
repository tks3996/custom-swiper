export default class Slider{constructor(containerId,options){this.container=document.getElementById(containerId),this.images=options.images||[],this.slidesPerView=options.slidesPerView||{mobile:1,tablet:1,desktop:1},this.pagination=options.pagination??!0,this.navigation=options.navigation??!0,this.autoSlide=options.autoSlide??!1,this.autoSlideInterval=options.autoSlideInterval||3e3,this.lazyLoad=options.lazyLoad??!0,this.transitionSpeed=options.transitionSpeed||300,this.accessibility=options.accessibility??!0,this.initialSlide=options.initialSlide||0,this.cloneSlides=options.cloneSlides??!1,this.centeredView=options.centeredView??!1,this.index=this.initialSlide,this.autoSlideTimer=null,this.currentSlidesPerView=this.getSlidesPerView(),this.init()}init(){this.createSlider(),this.updateSlidesPerView(),this.addEventListeners(),this.lazyLoad&&this.initLazyLoad(),this.autoSlide&&this.startAutoSlide()}createSlider(){this.container.innerHTML=`\n            <div class="slider">\n                <div class="slides">${this.getSlides()}</div>\n                ${this.navigation?'<button class="prev">&#10094;</button><button class="next">&#10095;</button>':""}\n                ${this.pagination?'<div class="pagination"></div>':""}\n            </div>\n        `,this.slidesContainer=this.container.querySelector(".slides"),this.prevButton=this.container.querySelector(".prev"),this.nextButton=this.container.querySelector(".next"),this.paginationContainer=this.container.querySelector(".pagination"),this.pagination&&this.createPaginationDots(),this.updatePagination(),this.moveSlide(0,!0)}getSlides(){let slides=this.images.map(((img,i)=>`<div class="slide"><img src="${img}" loading="lazy" alt="Slide ${i+1}"></div>`));return this.cloneSlides&&(slides=[...slides,...slides]),slides.join("")}initLazyLoad(){this.container.querySelectorAll("img").forEach((img=>img.setAttribute("loading","lazy")))}getSlidesPerView(){const width=window.innerWidth;return width<768?this.slidesPerView.mobile:width<1024?this.slidesPerView.tablet:this.slidesPerView.desktop}updateSlidesPerView(){this.currentSlidesPerView=this.getSlidesPerView(),document.documentElement.style.setProperty("--slidesPerView",this.currentSlidesPerView)}moveSlide(step,instant=!1){this.index=(this.index+step+this.images.length)%this.images.length,this.slidesContainer.style.transition=instant?"none":`transform ${this.transitionSpeed}ms ease-in-out`,this.slidesContainer.style.transform=`translateX(-${this.index*(100/this.getSlidesPerView())}%)`,this.updatePagination()}createPaginationDots(){this.paginationContainer.innerHTML=this.images.map(((_,i)=>`<div class="dot" data-index="${i}"></div>`)).join("")}updatePagination(){this.pagination&&(this.paginationContainer.querySelectorAll(".dot").forEach((dot=>dot.classList.remove("active"))),this.paginationContainer.querySelector(`.dot[data-index="${this.index}"]`)?.classList.add("active"))}startAutoSlide(){this.autoSlide&&(this.stopAutoSlide(),this.autoSlideTimer=setInterval((()=>this.moveSlide(1)),this.autoSlideInterval))}stopAutoSlide(){clearInterval(this.autoSlideTimer)}addEventListeners(){this.navigation&&(this.prevButton.addEventListener("click",(()=>this.moveSlide(-1))),this.nextButton.addEventListener("click",(()=>this.moveSlide(1)))),this.container.addEventListener("mouseenter",(()=>this.stopAutoSlide())),this.container.addEventListener("mouseleave",(()=>this.startAutoSlide())),document.addEventListener("keydown",(e=>{["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),"ArrowLeft"===e.key&&this.moveSlide(-1),"ArrowRight"===e.key&&this.moveSlide(1))}))}}